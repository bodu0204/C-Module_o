#       ___           ___           ___           ___           ___                       ___       ___     
#      /\__\         /\  \         /\__\         /\  \         /\  \          ___        /\__\     /\  \    
#     /::|  |       /::\  \       /:/  /        /::\  \       /::\  \        /\  \      /:/  /    /::\  \   
#    /:|:|  |      /:/\:\  \     /:/__/        /:/\:\  \     /:/\:\  \       \:\  \    /:/  /    /:/\:\  \  
#   /:/|:|__|__   /::\~\:\  \   /::\__\____   /::\~\:\  \   /::\~\:\  \      /::\__\  /:/  /    /::\~\:\  \ 
#  /:/ |::::\__\ /:/\:\ \:\__\ /:/\:::::\__\ /:/\:\ \:\__\ /:/\:\ \:\__\  __/:/\/__/ /:/__/    /:/\:\ \:\__\
#  \/__/~~/:/  / \/__\:\/:/  / \/_|:|~~|~    \:\~\:\ \/__/ \/__\:\ \/__/ /\/:/  /    \:\  \    \:\~\:\ \/__/
#        /:/  /       \::/  /     |:|  |      \:\ \:\__\        \:\__\   \::/__/      \:\  \    \:\ \:\__\  
#       /:/  /        /:/  /      |:|  |       \:\ \/__/         \/__/    \:\__\       \:\  \    \:\ \/__/  
#      /:/  /        /:/  /       |:|  |        \:\__\                     \/__/        \:\__\    \:\__\    
#      \/__/         \/__/         \|__|         \/__/                                   \/__/     \/__/    

CXX			=	c++
CXXFLAGS	=	-std=c++98 -MMD
CXXFLAGS	+=	-Wall -Wextra -Werror
CXXFLAGS	+=	-pedantic
NAME	=	a.out
SRCS	=	$(shell find * -name \*.cpp)
DEPS	=	$(OBJS:%.o=%.d)
OBJS	=	$(SRCS:%.cpp=$(OBJDIR)/%.o)
OBJDIR	=	obj

all: $(OBJDIR) $(NAME)

$(OBJDIR):
	mkdir -p $(OBJDIR)

$(OBJDIR)/%.o: %.cpp
	$(CXX) $(CXXFLAGS) -o $(@) -c $(<)

$(NAME): $(OBJS)
	$(CXX) -o $(@) $(OBJS)

clean:
	$(RM) $(OBJS) $(DEPS)

fclean:	clean
	$(RM)r $(OBJDIR) $(NAME)

re: fclean all

run: all
	@./$(NAME)

-include $(DEPS)

.PHONY: all clean fclean re run
